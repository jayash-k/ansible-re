---
- name: Tomcat installation
  hosts: servers
  become: false
  tasks:
    - name: Install Java
      apt:
        name: openjdk-8-jdk
        state: present

    - name: Download Tomcat
      get_url:
        url: https://dlcdn.apache.org/tomcat/tomcat-9/v9.0.97/bin/apache-tomcat-9.0.97.tar.gz
        dest: /home/ubuntu/apache-tomcat-9.0.97.tar.gz

    - name: Unarchive Tomcat
      unarchive:
        src: /home/ubuntu/apache-tomcat-9.0.97.tar.gz
        dest: /home/ubuntu/
        remote_src: true

    - name: Start Tomcat
      shell: /home/ubuntu/apache-tomcat-9.0.97/bin/startup.sh

    - name: Download Healet Template
      get_url:
        url: https://www.free-css.com/assets/files/free-css-templates/download/page296/healet.zip
        dest: /home/ubuntu/apache-tomcat-9.0.97/webapps/healet.zip

    - name: Unarchive Healet Template
      unarchive:
        src: /home/ubuntu/apache-tomcat-9.0.97/webapps/healet.zip
        dest: /home/ubuntu/apache-tomcat-9.0.97/webapps/
        remote_src: true

    - name: Remove Healet.zip
      file:
        path: /home/ubuntu/apache-tomcat-9.0.97/webapps/healet.zip
        state: absent
